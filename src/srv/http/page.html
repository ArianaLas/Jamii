<html>
<head>
  <script src="http://simplewebrtc.com/latest.js"></script>
  <script src="js/latest.js"></script>
  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="js/friendList.js"></script>
  <script type="text/javascript" src="js/friendListGUI.js"></script>
  <script type="text/javascript" src="js/connectionManager.js"></script>
  <script type="text/javascript" src="js/initFunctions.js"></script>
  <script type="text/javascript">

function send(){
	var list = document.getElementById("textList");
	var entry = document.createElement('li');
	var temp = document.getElementById("chat_input").value;
	entry.appendChild(document.createTextNode(temp));
	list.appendChild(entry);
	document.getElementById("chat_input").value="";  
	     
	return false;
}

function runScript(e) {
    if (e.keyCode == 13) {
		send();					
    }
}

function validate(){
	var inputs = document.getElementsByClassName("valid");
	for ( var i = 0; i < inputs.length; ++i ) {
		if ( inputs[i].value != "")
			return true;
	}
	return false;
}

function clickDiv(){
	var something = document.getElementById('me');

	something.style.cursor = 'pointer';
	something.onclick = function() {
		document.getElementById("lWindow").innerHTML = document.getElementById('me');
	};
}

                       
window.onload = function() {
    initMainScreen();
	clickDiv();

    document.getElementById("send").onclick = function() {
    	send();
    }
    document.getElementById("searchForm").style.visibility = "hidden";
    
    
	document.getElementById("search_button").onclick = function() {
		
		if ( validate() ) {
		 	var data  = {};
		 	data ["login"] = document.getElementById("login").value;
		 	data ["first_name"] = document.getElementById("first_name").value;
		 	data ["last_name"] = document.getElementById("last_name").value;
		 	data ["email"] = document.getElementById("email").value;
		
			document.getElementById("searchForm").style.visibility = "hidden";	    
		    window.flg.fl.searchFriends( data );
		 }
		 else {
			alert("Uzupelnij chociaz jedno pole");
		}
	
	}
}

/*SimpleWebRTC*/
var webrtc = new SimpleWebRTC({
	localVideoEl: 'localVideo',
	remoteVideosEl: 'remoteVideos',
	autoRequestMedia: true
});

webrtc.on('readyToCall', function () {
	webrtc.joinRoom('jamii');
});
  </script>

<link rel="stylesheet" href="css/style-app.css" type="text/css" />


</head>
<body>

	<div class="upperBar" id="uBar" style="height:100px; position: relative;">
		<div id="user1" class="videoBox">		
			<div id="remoteVideos"></div>
		</div>
		<div id="user2" class="videoBox"></div>
		<div id="user3" class="videoBox"></div>
		<div id="user4" class="videoBox"></div>
		<div id="user5" class="videoBox"></div>
		<div id="me" class="videoBox">		
			<video id="localVideo"></video>
		</div>
	</div>

	<div id="content" style="position:relative; border:1px solid; height: 490px;">
		<div class="leftWindow" id="lWindow" style="position:absolute;top:0px; left:0px; width:400px; height: 460px;">
			<div id="searchForm">
				<label for="login">Login: </label><input class="valid" id="login" type="text" /><br />
                <label for="first_name">First name: </label><input class="valid" id="first_name" type="text" /><br />
                <label for="last_name">Last name: </label><input class="valid" id="last_name" type="text" /><br />
                <label for="email">E-mail: </label><input class="valid" id="email" type="text" /><br />
                <input id="search_button" class="search_button" type="button" value="Search" />
            </div>
		</div>
		<div class="friendList" id="fList" style="position:absolute; top:0px; right:0px; width:200px; height: 460px; border:1px solid;"></div>

		<!-- <div class="chat" id="chat" style="position:absolute; top:0px; right:0px; width:200px; height: 460px; border:1px solid;"> -->

			<div style="height:410px;border:1px solid #ccc;font:16px/26px Georgia, Garamond, Serif;overflow:auto;">
				<ul id="textList">

				</ul>

			</div>
			<input id="chat_input" type="text" name="chat_input" onkeypress="runScript(event)"><br>
			<input id="send" class="send_button" type="button" value="Send" />
		</div>	
	</div>	
	<div class="downBar" id="dBar" style="width: 100%; height:40px; position:relative;">
		<div id="chatButton" style="width: 120px; height:100%; position: absolute; top:0px; left:0px; border:1px solid;">Chat</div>
		<div id="board" style="width: 120px; height:100%; position: absolute; top:0px; left:120px; border:1px solid;">Board</div>
		<div id="fileShare" style="width: 120px; height:100%; position: absolute; top:0px; left:240px; border:1px solid;">File Share</div>
		<div id="desktopShare" style="width: 120px; height:100%; position: absolute; top:0px; left:360px; border:1px solid;">Desktop Share</div>
		<div id="options" style="width: 120px; height:100%; position: absolute; top:0px; left:480px; border:1px solid;">Options</div>	
	</div>

</body>
</html>
